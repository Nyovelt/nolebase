import{_ as i,c as d,J as s,m as a,a as e,w as p,V as r,E as o,o as h}from"./chunks/framework.WH0rnJL5.js";const D=JSON.parse('{"title":"修复在 macOS 上因为默认 pnpm 在 PATH 中权重过高导致 corepack 失效的问题","description":"","frontmatter":{"tags":["操作系统/macOS","开发/Nodejs/pnpm","开发/Nodejs/npm","开发/Nodejs","命令行","开发/Nodejs/corepack","命令行/corepack","命令行/npm","命令行/pnpm"]},"headers":[],"relativePath":"笔记/🎛️ 操作系统/🍎 macOS/修复在 macOS 上因为默认 pnpm 在 PATH 中权重过高导致 corepack 失效的问题.md","filePath":"笔记/🎛️ 操作系统/🍎 macOS/修复在 macOS 上因为默认 pnpm 在 PATH 中权重过高导致 corepack 失效的问题.md"}'),_={name:"笔记/🎛️ 操作系统/🍎 macOS/修复在 macOS 上因为默认 pnpm 在 PATH 中权重过高导致 corepack 失效的问题.md"},k=a("h1",{id:"修复在-macos-上因为默认-pnpm-在-path-中权重过高导致-corepack-失效的问题",tabindex:"-1"},[e("修复在 macOS 上因为默认 "),a("code",null,"pnpm"),e(" 在 "),a("code",null,"PATH"),e(" 中权重过高导致 "),a("code",null,"corepack"),e(" 失效的问题 "),a("a",{class:"header-anchor",href:"#修复在-macos-上因为默认-pnpm-在-path-中权重过高导致-corepack-失效的问题","aria-label":'Permalink to "修复在 macOS 上因为默认 `pnpm` 在 `PATH` 中权重过高导致 `corepack` 失效的问题"'},"​")],-1),m=a("code",null,"nr",-1),g=a("code",null,"pnpm",-1),u=a("code",null,"8.6.12",-1),b=a("code",null,"pnpm",-1),v=a("code",null,"package.json",-1),C=a("code",null,'"packageManager": "pnpm@8.5.14"',-1),P=a("code",null,"corepack",-1),y=a("code",null,"corepack prepare <package> --activate",-1),F=a("code",null,"pnpm",-1),f=a("code",null,"corepack",-1),N=a("code",null,"corepack",-1),A=r('<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> uninstall -g yarn pnpm</span></span></code></pre></div><p>如果是用 <code>pnpm</code> 自己安装的 <code>pnpm</code>，可以用这个命令移除：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> uninstall -g pnpm</span></span></code></pre></div><p>接下来重新确认一下 <code>npm</code> 侧的 <code>corepack</code> 是存在的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install -g corepack</span></span></code></pre></div><p>然后激活 <code>corepack</code>：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span></span></code></pre></div><p>如果希望直接用 <code>pnpm</code> 的 8.15.4 版本的话，可以直接运行下面的命令来下载和准备好：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> prepare pnpm@8.15.4 --activate</span></span></code></pre></div><h2 id="贡献者" tabindex="-1">贡献者 <a class="header-anchor" href="#贡献者" aria-label="Permalink to &quot;贡献者&quot;">​</a></h2>',10),S=a("h2",{id:"文件历史",tabindex:"-1"},[e("文件历史 "),a("a",{class:"header-anchor",href:"#文件历史","aria-label":'Permalink to "文件历史"'},"​")],-1);function T(O,E,V,x,j,H){const t=o("NolebasePageProperties"),n=o("VPNolebaseInlineLinkPreview"),c=o("NolebaseGitContributors"),l=o("NolebaseGitChangelog");return h(),d("div",null,[k,s(t),a("p",null,[e("今天用着用着 macOS 发现 "),s(n,{href:"https://github.com/antfu/ni",target:"_blank",rel:"noreferrer"},{default:p(()=>[e("@antfu/ni")]),_:1}),e("的 "),m,e(" 子命令突然不工作了，然后 "),g,e(" 回退到了 "),u,e(" 的系统全局 "),b,e(" 版本，就算是项目的 "),v,e(" 已经写了 "),C,e("，确认了 "),P,e(" 存在，并且已经激活，甚至主动使用了 "),y,e(" 都无法使用项目内指定的 "),F,e("。")]),a("p",null,[e("在反复搜索之后，还是决定去阅读一下 "),f,e(" 的官方文档，在参考了 "),N,e(" 的文档后 "),s(n,{href:"https://github.com/nodejs/corepack/blob/main/README.md",target:"_blank",rel:"noreferrer"},{default:p(()=>[e("corepack/README.md at main · nodejs/corepack")]),_:1}),e("，发现官方文档建议把全局的 pnpm 卸载删除了：")]),A,s(c),S,s(l)])}const G=i(_,[["render",T]]);export{D as __pageData,G as default};

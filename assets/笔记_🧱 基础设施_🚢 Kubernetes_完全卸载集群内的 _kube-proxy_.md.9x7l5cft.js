import{_ as h,c as r,J as a,m as s,w as l,a as e,V as d,E as i,o as k}from"./chunks/framework.WH0rnJL5.js";const N=JSON.parse('{"title":"å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ kube-proxy","description":"","frontmatter":{"tags":["è¿ç»´/äº‘åŸç”Ÿ/Kubernetes","è¿ç»´/äº‘åŸç”Ÿ/Kubernetes/K8s","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes/K8s","è½¯ä»¶/äº‘åŸç”Ÿ/kubelet","å‘½ä»¤è¡Œ/kubectl","è½¯ä»¶/äº‘åŸç”Ÿ/kubectl","å‘½ä»¤è¡Œ/ip","å‘½ä»¤è¡Œ/ipvsadm","è½¯ä»¶/äº‘åŸç”Ÿ/ipvsadm","è®¡ç®—æœº/ç½‘ç»œ/Calico","è¿ç»´/Calico","è½¯ä»¶/äº‘åŸç”Ÿ/Calico","è¿ç»´/Cilium","è®¡ç®—æœº/ç½‘ç»œ/Cilium","å‘½ä»¤è¡Œ/cilium","è½¯ä»¶/äº‘åŸç”Ÿ/Cilium"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ `kube-proxy`.md","filePath":"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ `kube-proxy`.md"}'),c={name:"ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ `kube-proxy`.md"},u=s("h1",{id:"å®Œå…¨å¸è½½é›†ç¾¤å†…çš„-kube-proxy",tabindex:"-1"},[e("å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ "),s("code",null,"kube-proxy"),e(),s("a",{class:"header-anchor",href:"#å®Œå…¨å¸è½½é›†ç¾¤å†…çš„-kube-proxy","aria-label":'Permalink to "å®Œå…¨å¸è½½é›†ç¾¤å†…çš„ `kube-proxy`"'},"â€‹")],-1),b=s("h3",{id:"æ–‡æ¡£å…¼å®¹æ€§",tabindex:"-1"},[e("æ–‡æ¡£å…¼å®¹æ€§ "),s("a",{class:"header-anchor",href:"#æ–‡æ¡£å…¼å®¹æ€§","aria-label":'Permalink to "æ–‡æ¡£å…¼å®¹æ€§"'},"â€‹")],-1),g=s("thead",null,[s("tr",null,[s("th",null,"ä¸»ä½“"),s("th",null,"ç‰ˆæœ¬å·"),s("th",null,"æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰")])],-1),y=s("td",null,"kubeadm",-1),m=s("td",null,"1.28",-1),_=s("code",null,"kube-proxy",-1),C=d('<h2 id="å¤‡ä»½-kube-proxy-ç›¸å…³çš„é…ç½®" tabindex="-1">å¤‡ä»½ <code>kube-proxy</code> ç›¸å…³çš„é…ç½® <a class="header-anchor" href="#å¤‡ä»½-kube-proxy-ç›¸å…³çš„é…ç½®" aria-label="Permalink to &quot;å¤‡ä»½ `kube-proxy` ç›¸å…³çš„é…ç½®&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl get ds -n kube-system kube-proxy -o yaml</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-proxy-daemonset.yaml</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl get cm -n kube-system kube-proxy -o yaml</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-proxy-configmap.yaml</span></span></code></pre></div><h2 id="åˆ é™¤ç›¸å…³çš„-daemonset" tabindex="-1">åˆ é™¤ç›¸å…³çš„ <code>DaemonSet</code> <a class="header-anchor" href="#åˆ é™¤ç›¸å…³çš„-daemonset" aria-label="Permalink to &quot;åˆ é™¤ç›¸å…³çš„ `DaemonSet`&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo kubectl -n kube-system delete ds kube-proxy</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">daemonset.apps</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;kube-proxy&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deleted</span></span></code></pre></div><h2 id="åˆ é™¤ç›¸å…³çš„-configmap" tabindex="-1">åˆ é™¤ç›¸å…³çš„ <code>ConfigMap</code> <a class="header-anchor" href="#åˆ é™¤ç›¸å…³çš„-configmap" aria-label="Permalink to &quot;åˆ é™¤ç›¸å…³çš„ `ConfigMap`&quot;">â€‹</a></h2><p>ç›®çš„æ˜¯ä¸ºäº†<strong>é˜²æ­¢ä»¥åä½¿ç”¨ <code>kubeadm</code> å‡çº§ K8s çš„æ—¶å€™é‡æ–°å®‰è£…äº† <code>kube-proxy</code>ï¼ˆ1.19 ç‰ˆæœ¬ä¹‹åçš„ K8S ï¼‰</strong>ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo kubectl -n kube-system delete cm kube-proxy</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">configmap</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;kube-proxy&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deleted</span></span></code></pre></div><h2 id="æ¸…é™¤æ‰-iptables-è§„åˆ™å’Œ-ipvs-è§„åˆ™ä»¥åŠ-ipvs0-ç½‘å¡" tabindex="-1">æ¸…é™¤æ‰ <code>iptables</code> è§„åˆ™å’Œ <code>ipvs</code> è§„åˆ™ä»¥åŠ <code>ipvs0</code> ç½‘å¡ <a class="header-anchor" href="#æ¸…é™¤æ‰-iptables-è§„åˆ™å’Œ-ipvs-è§„åˆ™ä»¥åŠ-ipvs0-ç½‘å¡" aria-label="Permalink to &quot;æ¸…é™¤æ‰ `iptables` è§„åˆ™å’Œ `ipvs` è§„åˆ™ä»¥åŠ `ipvs0` ç½‘å¡&quot;">â€‹</a></h2><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹æœºå™¨ä¸Šé¢ä½¿ç”¨ <code>root</code> æƒé™æ‰§è¡Œï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables-save </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> KUBE </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iptables-restore</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ipvsadm -C</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ip link del kube-ipvs0</span></span></code></pre></div><h2 id="é‡å¯èŠ‚ç‚¹" tabindex="-1">é‡å¯èŠ‚ç‚¹ <a class="header-anchor" href="#é‡å¯èŠ‚ç‚¹" aria-label="Permalink to &quot;é‡å¯èŠ‚ç‚¹&quot;">â€‹</a></h2><p>æ‰§è¡Œå®Œä¹‹åè¯·åŠ¡å¿…é‡å¯èŠ‚ç‚¹ã€‚</p><h2 id="è´¡çŒ®è€…" tabindex="-1">è´¡çŒ®è€… <a class="header-anchor" href="#è´¡çŒ®è€…" aria-label="Permalink to &quot;è´¡çŒ®è€…&quot;">â€‹</a></h2>',13),F=s("h2",{id:"æ–‡ä»¶å†å²",tabindex:"-1"},[e("æ–‡ä»¶å†å² "),s("a",{class:"header-anchor",href:"#æ–‡ä»¶å†å²","aria-label":'Permalink to "æ–‡ä»¶å†å²"'},"â€‹")],-1);function v(x,f,A,P,q,B){const n=i("NolebasePageProperties"),t=i("VPNolebaseInlineLinkPreview"),o=i("NolebaseGitContributors"),p=i("NolebaseGitChangelog");return k(),r("div",null,[u,a(n),b,s("table",null,[g,s("tbody",null,[s("tr",null,[y,m,s("td",null,[a(t,{href:"https://v1-28.docs.kubernetes.io/",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("https://v1-28.docs.kubernetes.io/")]),_:1})])])])]),s("p",null,[e("æ ¹æ® "),a(t,{href:"https://tinychen.com/20230201-k8s-15-migrate-cni-from-calico-to-cilium/",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("k8sç³»åˆ—15-calicoæœ‰æŸè¿ç§»è‡³cilium")]),_:1}),e(" æŠ€æœ¯æ–‡æ¡£æ‰€åˆ†äº«çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®‰è£…å‰é…ç½®å’Œå¤‡ä»½ä¸€ä¸‹ "),_,e(" ç›¸å…³èµ„æºå’Œé…ç½®æ–‡ä»¶ï¼š")]),C,a(o),F,a(p)])}const K=h(c,[["render",v]]);export{N as __pageData,K as default};

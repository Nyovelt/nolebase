import{_ as h,c as p,J as s,m as e,a,w as t,V as n,E as o,o as d}from"./chunks/framework.WH0rnJL5.js";const k="/assets/twitter-status-1690198922210189312-image.5NyVPKJH.png",G=JSON.parse('{"title":"修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题","description":"","frontmatter":{"tags":["操作系统/macOS","软件/macOS/Finder","命令行/rm","命令行/find","命令行/touch","命令行/killall"]},"headers":[],"relativePath":"笔记/🎛️ 操作系统/🍎 macOS/修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题.md","filePath":"笔记/🎛️ 操作系统/🍎 macOS/修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题.md"}'),_={name:"笔记/🎛️ 操作系统/🍎 macOS/修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题.md"},f=e("h1",{id:"修复-finder-访达-在变更默认打开程序之后图标依然维持原样的异常问题",tabindex:"-1"},[a("修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题 "),e("a",{class:"header-anchor",href:"#修复-finder-访达-在变更默认打开程序之后图标依然维持原样的异常问题","aria-label":'Permalink to "修复 Finder（访达）在变更默认打开程序之后图标依然维持原样的异常问题"'},"​")],-1),m=n('<h3 id="文档兼容性" tabindex="-1">文档兼容性 <a class="header-anchor" href="#文档兼容性" aria-label="Permalink to &quot;文档兼容性&quot;">​</a></h3><table><thead><tr><th>主体</th><th>版本号</th><th>文档地址</th></tr></thead><tbody><tr><td>macOS</td><td>Ventura 13.4.1 (c)</td><td></td></tr></tbody></table><h2 id="说明" tabindex="-1">说明 <a class="header-anchor" href="#说明" aria-label="Permalink to &quot;说明&quot;">​</a></h2><p>前两天小音 @LittleSound 的 macOS 中的 Finder、Visual Studio Code 中的 TypeScript 文件（拓展名为 <code>.ts</code>）的文件预览图标都莫名其妙地变成了哔哩哔哩的客户端的模样：</p><p><img src="'+k+'" alt=""></p>',5),u=n('<p>有伙伴提到 <code>.ts</code> 拓展名其实是一种 MPEG 传输流的文件格式<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>，也许是因为这样的原因所以导致 <code>.ts</code> 文件被当作成了一种「视频文件」，于是出现了这样的乌龙事件。</p><p>但是小音已经尝试过通过在 Finder 中右键 <code>.ts</code> 文件，点选「显示简介」- 在「打开方式」部分中选择「Visual Studio Code」-点击「全部更改...」来配置文件的默认打开方式为 Visual Studio Code 后，重启 Finder 也好，重启 macOS 也好，图标依然是哔哩哔哩的图标，找了许多方法，大多都已经在 2023 年的 macOS 版本中不再奏效。</p><h2 id="tl-dr" tabindex="-1">TL;DR <a class="header-anchor" href="#tl-dr" aria-label="Permalink to &quot;TL;DR&quot;">​</a></h2>',3),g=n(`<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm -rfv /Library/Caches/com.apple.iconservices.store</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> find /private/var/folders/ </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> com.apple.dock.iconcache -or -name com.apple.iconservices </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\)</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm -rfv {} </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">killall</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Dock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">killall</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Finder</span></span></code></pre></div><p>你可以逐行复制执行。或者写到某个地方存放着在需要的时候执行。</p><p>其中：</p><ul><li><code>com.apple.iconservices.store</code> 是系统图标存储的缓存文件，有的时候出问题了可以尝试通过删除来进行修复<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></li><li><code>com.apple.dock.iconcache</code> 和 <code>com.apple.iconservices</code> 也是系统图标缓存和图标服务的文件，有的时候 <code>com.apple.iconservices</code> 会过大，可以通过删除进行清理</li></ul><h2 id="解释" tabindex="-1">解释 <a class="header-anchor" href="#解释" aria-label="Permalink to &quot;解释&quot;">​</a></h2><p>很容易理解的是，第一行的命令中的 <code>rm -rfv</code> 就是简单的强制删除文件的含义。</p><p>但第二行的 <code>/private/var/folders/</code> 在不同的系统版本上可能会略有区别，比如在早期的版本里你也许会需要移除 <code>/private</code> 这个前缀的目录，而第二行命令的 <code>/private/var/folders/</code> 后面接上了 <code>-name com.apple.dock.iconcache</code> 其实并不意味着 <code>com.apple.dock.iconcache</code> 图标缓存文件和 <code>com.apple.iconservices</code> 图标服务（也许未来会变成目录）这两个文件就直接放在 <code>/private/var/folders/</code> 的目录下，其实在实际的情况中，它前缀的命令也许是根据不同的 container 容器（macOS 的概念）来生成的，比如：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/private/var/folders//m0/k_38ftb53yg0mqbcrrjypr3m0000gn/C/com.apple.dock.iconcache</span></span></code></pre></div><p>所以这也是为什么我们需要使用 <code>find</code> 命令来先搜索再删除的原因。</p><p>另外值得一提的是，我在寻找资料的时候发现有的地方会使用类似于下面的命令：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> find /private/var/folders/ -name com.apple.dock.iconcache -exec rm {} </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> find /private/var/folders/ -name com.apple.iconservices -exec rm -rf {} </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\;</span></span></code></pre></div><p>但其实这段和上面的命令</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> find /private/var/folders/ </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> com.apple.dock.iconcache -or -name com.apple.iconservices </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\)</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -exec</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm -rfv {} </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\;</span></span></code></pre></div><p>效果是一模一样的，只是写法合并了起来。</p><p>最后一部分的 <code>killall Dock; killall Finder</code> 就是字面含义，将 <code>Dock</code> 和 <code>Finder</code> 进程都结束掉，请放心，他们都会自动重启的，如果出现问题，你也可以通过重启 macOS 来尝试应用上面命令带来的系统变更和恢复 Dock 栏以及 Finder（访达）应用的正常运行。</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2>`,16),C=e("h2",{id:"延伸阅读",tabindex:"-1"},[a("延伸阅读 "),e("a",{class:"header-anchor",href:"#延伸阅读","aria-label":'Permalink to "延伸阅读"'},"​")],-1),b=e("h2",{id:"贡献者",tabindex:"-1"},[a("贡献者 "),e("a",{class:"header-anchor",href:"#贡献者","aria-label":'Permalink to "贡献者"'},"​")],-1),v=e("h2",{id:"文件历史",tabindex:"-1"},[a("文件历史 "),e("a",{class:"header-anchor",href:"#文件历史","aria-label":'Permalink to "文件历史"'},"​")],-1),F=e("hr",{class:"footnotes-sep"},null,-1),y={class:"footnotes"},A={class:"footnotes-list"},S={id:"fn1",class:"footnote-item"},P=e("a",{href:"#fnref1",class:"footnote-backref"},"↩︎",-1),x={id:"fn2",class:"footnote-item"},w=e("a",{href:"#fnref2",class:"footnote-backref"},"↩︎",-1),T={id:"fn3",class:"footnote-item"},D=e("a",{href:"#fnref3",class:"footnote-backref"},"↩︎",-1);function E(V,N,B,O,q,I){const l=o("NolebasePageProperties"),i=o("VPNolebaseInlineLinkPreview"),r=o("NolebaseGitContributors"),c=o("NolebaseGitChangelog");return d(),p("div",null,[f,s(l),m,e("blockquote",null,[e("p",null,[a("开发插件的时候遇到了这样的问题，请问是叔叔入侵电脑了吗？ -- "),s(i,{href:"https://twitter.com/OikawaRizumu/status/1690198922210189312/photo/1",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("Twitter")]),_:1})])]),u,e("p",null,[a("不过好消息是，在寻找答案的时候发现了 "),s(i,{href:"https://apple.stackexchange.com/a/450863",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("StackOverflow")]),_:1}),a(" 上的回答给出了脚本：")]),g,e("ul",null,[e("li",null,[s(i,{href:"https://apple.stackexchange.com/a/450863",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("macos - Icons remains the same after I have changed the default program for opening the file - Ask Different")]),_:1})]),e("li",null,[s(i,{href:"https://gist.github.com/ismyrnow/e92c6010cda9325b2d8811387a05f224",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("Clear the icon cache on a Mac when you start seeing generic icons in Finder or the Dock - GitHub Gist")]),_:1})]),e("li",null,[s(i,{href:"https://discussions.apple.com/thread/8441124",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("How to clear Mac OSX icon cache - Apple Community")]),_:1})]),e("li",null,[s(i,{href:"https://apple.stackexchange.com/a/225084",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("macos - Reset icon cache on MacBook - Ask Different")]),_:1})])]),C,e("ul",null,[e("li",null,[s(i,{href:"https://apple.stackexchange.com/questions/246745/how-to-reset-file-icons-associated-with-default-program-on-el-capitan",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("finder - How to reset file icons associated with default program on El Capitan - Ask Different")]),_:1})]),e("li",null,[s(i,{href:"https://www.rubicode.com/Software/RCDefaultApp/",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("Rubicode - RCDefaultApp")]),_:1})]),e("li",null,[s(i,{href:"https://apple.stackexchange.com/questions/183166/how-do-i-restore-icons-in-finder",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("macos - How do I restore icons in Finder? - Ask Different")]),_:1})])]),b,s(r),v,s(c),F,e("section",y,[e("ol",A,[e("li",S,[e("p",null,[s(i,{href:"https://x.com/zhizijun/status/1690257064554344448",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("https://x.com/zhizijun/status/1690257064554344448")]),_:1}),a(),P])]),e("li",x,[e("p",null,[s(i,{href:"https://en.wikipedia.org/wiki/MPEG_transport_stream",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("MPEG transport stream - Wikipedia")]),_:1}),a(),w])]),e("li",T,[e("p",null,[s(i,{href:"https://discussions.apple.com/thread/253834128",target:"_blank",rel:"noreferrer"},{default:t(()=>[a("What is com.apple.iconservices.store? I f… - Apple Community")]),_:1}),a(),D])])])])])}const L=h(_,[["render",E]]);export{G as __pageData,L as default};
